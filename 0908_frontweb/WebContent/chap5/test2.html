<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>web3js활용</title>
	<style>
		body { font-size:14px; }
 	</style>
	<!-- cdn 방식 js파일 링크 : web3, bignumber, jquery -->
	<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bignumber.js/bignumber.min.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script>
	<!-- 초기화 코드 -->
	let web3;
	web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
	console.log("web3js api version >> ", web3.version.api); // web3 version
					
	<!-- 초기화 코드(자바스크립트) -->
	$(document).ready( function() {
		getAccounts().then( (arr) => {
			console.log("계정수 : ", arr.length);			
			console.log("계정 : ", arr);
			
			option = "";
			for(account in arr) {
				option += '<option value="' + account + '">' + account + '</option>';
				$("#AccountList").html(option);
			}	
		} );
	});
	
	<!-- 함수 -->
	function getAccounts() {
		return new Promise( (ok, fail) => {
			web3.eth.getAccounts( (error, result) => {
				if(!error) {
					ok(result);
				} else {
					fail(error);
				}
			});
		});
	}
	
	function getAccount() {
		var obj = document.getElementById("AccountNum");
		$("#Account").text(web3.eth.accounts[obj.value]);
		console.log("getAccount()")
	}
	
	function AccountListChange() {
		var obj = document.getElementById("AccountNum");
		$("#Account").text(web3.eth.accounts[obj.value]);
		
	}
	</script>
</head>

<!-- 화면 그리기 담당 -->
<body>
   	<h2>Web3js API 예제 구현</h2>
	계정 리스트 : <select id="AccountList"></select><br/>

<!--	
계정 :  <span id="Account">none</span> 
		<select id="AccountNum" onchange="AccountListChange()">
		<option value="0">1</option>
		<option value="1">2</option>
		<option value="2">3</option>
		<option value="3">4</option>
		<option value="4">5</option>
		</select>
		<button onclick="getAccount();">클릭</button><br/>
-->
</body>
</html>